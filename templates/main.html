<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <style>
        /* svg rect {
            fill: teal;
        } */

        .bar {
            fill: teal;
        }

        .scatterRect {
            fill: white;
        }

        svg text {
            fill: dimgray;
            font: 12px sans-serif;
            text-anchor: end;
        }

        .biplot_text{
            fill: black;
            font: 15px sans-serif;
            text-anchor: end;
        }

        div h1 {
            fill: dimgray;
            font: 12px sans-serif;
            text-anchor: end;

        }

        .line {
            stroke: red;
            stroke-width: 2px;
            fill: none;
        }

        .dot {
            fill: white;
            stroke: teal;
            
        }

        .dot2 {
            fill: red;
            stroke: black;
            stroke-width: 1px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: #333;
            color: white;
            font-weight: bold;
            cursor: s-resize;
            background-repeat: no-repeat;
            background-position: 3% center;
        }

        td,
        th {
            padding: 6px;
            border: 1px solid #ccc;
            text-align: left;
        }

        .task2_area.tick{
    opacity: 0;
}

    </style>
</head>

<body>

    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">MLS Player Statistics</a>
            </div>
        </div>
    </nav>

    <div style="width: 1600px; height: 750px; align-content: center;" id="task1_area">
        <div style="width: 50%; float: left;" id="scree_plot"></div>
        <div style="width: 50%; float: right;" id="biplot"></div>
    </div>
    <div style="width: 1200px; height: 1100px;" id="task2_area"></div>
    <div style="width: 1200px; height: 550px;" id="task2_table"></div>


    <script type="text/javascript">

        var data = {{ data.chart_data | safe }}


        // renderScreePlot();
        // renderBiPlot();

        // function renderScreePlot() {
        //     document.getElementById("scree_plot").innerHTML = ""

        //     var width = 500,
        //         height = 500;

        //     var svg = d3.select("#scree_plot")
        //         .append("svg")
        //         .attr("width", width)
        //         .attr("height", height);

        //     // svg.append("text")
        //     // .attr("x", width * 3 / 4)
        //     // .attr("y", 30)
        //     // .style("font-size", "30px")
        //     // .attr("class", "title")
        //     // .text("Bar Chart For " + field);

        //     var margin = 200,
        //         width = svg.attr("width") - margin,
        //         height = svg.attr("height") - margin;


        //     var xScale = d3.scaleBand().range([0, width]).padding(0.4),
        //         yScale = d3.scaleLinear().range([height, 0]);

        //     var g = svg.append("g")
        //         .attr("transform", "translate(" + 100 + "," + 100 + ")");


        //     //if data available
        //     // d3.csv("all_players.csv", function (data) {
        //     // var data = DATA;
        //     // console.log(data);


        //     // var data_count = d3.nest()
        //     //     .key(function (d) {
        //     //         return d[feature];
        //     //     })
        //     //     .rollup(function (leaves) {
        //     //         return leaves.length;
        //     //     })
        //     //     .entries(data);

        //     // console.log(data_count);

        //     // xScale.domain(data_count.map(function (d) { return d.key; }));
        //     // yScale.domain([0, d3.max(data_count, function (d) { return d.value; })]);

        //     xScale.domain(data["exp_var"].map(function (d) { return d.pc_number; }));
        //     yScale.domain([0, 100]);

        //     var svg_x_scale = g.append("g")
        //         .attr("transform", "translate(0," + height + ")")
        //         .call(d3.axisBottom(xScale));
        //     svg_x_scale.selectAll("text")
        //         .attr("transform", "translate(-10,0)rotate(-45)")
        //         .style("text-anchor", "end");
        //     svg_x_scale.append("text")
        //         .attr("y", 60)
        //         .attr("x", width / 2)
        //         .attr("text-anchor", "end")
        //         .attr("class", "x label")
        //         .attr("stroke", "black")
        //         .style("font-size", "15px")
        //         .text("Principle Components");


        //     g.append("g") //Another group element to have our y-axis grouped under one group element
        //         .call(d3.axisLeft(yScale).tickFormat(function (d) { // Try with X Scaling too.
        //             return d;
        //         })
        //             .ticks(10)) //We have also specified the number of ticks we would like our y-axis to have using ticks(10).
        //         .append("text")
        //         .attr("y", 20)
        //         .attr("x", -height / 2)
        //         .attr("transform", "rotate(-90)")
        //         .attr("dy", "-5.1em")
        //         .attr("class", "y label")
        //         .attr("text-anchor", "end")
        //         .attr("stroke", "black")
        //         .style("font-size", "15px")
        //         .text("Explained Variance");

        //     g.selectAll(".bar") //created dynamic bars with our data using the SVG rectangle element.
        //         .data(data["exp_var"])
        //         .enter().append("rect")
        //         .attr("class", "bar")
        //         .attr("x", function (d) {
        //             console.log(d);
        //             return xScale(d.pc_number);
        //         })  //x scale created earlier and pass the year value from our data.
        //         .attr("y", function (d) { return yScale(d.exp_var); }) // pass the data value to our y scale and receive the corresponding y value from the y range.
        //         .attr("width", xScale.bandwidth()) //width of our bars would be determined by the scaleBand() function.
        //         .attr("height", function (d) { return height - yScale(parseFloat(d.exp_var)); }); //height of the bar would be calculated as height - yScale(d.value)
        //     //the height of the SVG minus the corresponding y-value of the bar from the y-scale
        //     // });

        //     var valueline2 = d3.line()
        //         .x(function (d) { return xScale(d.pc_number); })
        //         .y(function (d, i) { return yScale(d.cumsum_exp_var); })

        //     g.append("path")
        //         .datum(data["exp_var"])
        //         .attr("class", "line2")
        //         .attr("d", valueline2);

        //     // });
        // }

        // function renderBiPlot() {
        //     // document.getElementById("biplot").innerHTML = "skhfsfigs"

        //     document.getElementById("biplot").innerHTML = ""
        //     var width = 500,
        //         height = 500;

        //     var svg = d3.select("#biplot")
        //         .append("svg")
        //         .attr("width", width)
        //         .attr("height", height);

        //     // svg.append("text")
        //     // .attr("x", width * 3 / 4)
        //     // .attr("y", 30)
        //     // .style("font-size", "30px")
        //     // .attr("class", "title")
        //     // .text("Bar Chart For " + field);

        //     // svg.append("text")
        //     //     .attr("x", width / 4)
        //     //     .attr("y", 30)
        //     //     .style("font-size", "30px")
        //     //     .text("ScatterPlot For " + field_X + " vs " + field_Y);

        //     var margin = 200,
        //         width = svg.attr("width") - margin,
        //         height = svg.attr("height") - margin;

        //     var g = svg.append("g")
        //         .attr("transform", "translate(" + 100 + "," + 100 + ")");

        //     const xAxisG = g.append('g')
        //         .attr('transform', "translate(0," + height + ")");
        //     const yAxisG = g.append('g');

        //     xAxisG.append('text')
        //         .attr('class', 'axis-label')
        //         .attr('x', width / 2)
        //         .attr('y', 30)
        //         .style("font-size", "15px")
        //         .attr("class", "x label")
        //         .attr("stroke", "black")
        //         .text("PC1");

        //     yAxisG.append('text')
        //         .attr('class', 'axis-label')
        //         .attr('x', -height / 2)
        //         .attr('y', -30)
        //         .attr('transform', `rotate(-90)`)
        //         .style('text-anchor', 'middle')
        //         .style("font-size", "15px")
        //         .attr("class", "y label")
        //         .attr("stroke", "black")
        //         .text("PC2");

        //     //Read the data
        //     // d3.csv("all_players.csv", function (data) {

        //         // Add X axis
        //         var x = d3.scaleLinear()
        //             .domain([d3.min(data["data_loading"], function (d) { return +d["PC1"]; }), d3.max(data["data_loading"], function (d) { return +d["PC1"]; })])
        //             .range([0, width]);
        //         var x_scatter_scale = g.append("g")
        //             .attr("transform", "translate(0," + height + ")")
        //             .call(d3.axisBottom(x));
        //         // Add Y axis
        //         var y = d3.scaleLinear()
        //             .domain([d3.min(data["data_loading"], function (d) { return +d["PC2"]; }), d3.max(data["data_loading"], function (d) { return +d["PC2"]; })])
        //             .range([height, 0]);
        //         g.append("g")
        //             .call(d3.axisLeft(y));

        //         // Add dots
        //         g.append('g')
        //             .selectAll("dot")
        //             .data(data["data_loading"])
        //             .enter()
        //             .append("circle")
        //             .attr("cx", function (d) { return x(d["PC1"]); })
        //             .attr("cy", function (d) { return y(d["PC2"]); })
        //             .attr("r", 1.5)
        //             .style("fill", "teal")

        //     // })
        // }


    </script>
    <script type="text/javascript" src="{{ url_for('static', filename='main.js') }}"></script>
</body>

</html>